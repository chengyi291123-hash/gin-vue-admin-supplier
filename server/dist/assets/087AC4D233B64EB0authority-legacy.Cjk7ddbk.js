/*! 
 Build based on gin-vue-admin 
 Time : 1764044126000 */
!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function i(r,a,u,o){var i=a&&a.prototype instanceof c?a:c,d=Object.create(i.prototype);return n(d,"_invoke",function(r,n,a){var u,o,i,c=0,d=a||[],f=!1,s={p:0,n:0,v:e,a:y,f:y.bind(e,4),d:function(t,r){return u=t,o=0,i=e,s.n=r,l}};function y(r,n){for(o=r,i=n,t=0;!f&&c&&!a&&t<d.length;t++){var a,u=d[t],y=s.p,v=u[2];r>3?(a=v===n)&&(i=u[(o=u[4])?5:(o=3,3)],u[4]=u[5]=e):u[0]<=y&&((a=r<2&&y<u[1])?(o=0,s.v=n,s.n=u[1]):y<v&&(a=r<3||u[0]>n||n>v)&&(u[4]=r,u[5]=n,s.n=v,o=0))}if(a||r>1)return l;throw f=!0,n}return function(a,d,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===d&&y(d,v),o=d,i=v;(t=o<2?e:i)||!f;){u||(o?o<3?(o>1&&(s.n=-1),y(o,i)):s.n=i:s.v=i);try{if(c=2,u){if(o||(a="next"),t=u[a]){if(!(t=t.call(u,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,o<2&&(o=0)}else 1===o&&(t=u.return)&&t.call(u),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);u=e}else if((t=(f=s.n<0)?i:r.call(n,s))!==l)break}catch(t){u=e,o=1,i=t}finally{c=1}}return{value:t,done:f}}}(r,u,o),!0),d}var l={};function c(){}function d(){}function f(){}t=Object.getPrototypeOf;var s=[][u]?t(t([][u]())):(n(t={},u,function(){return this}),t),y=f.prototype=c.prototype=Object.create(s);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e}return d.prototype=f,n(y,"constructor",f),n(f,"constructor",d),d.displayName="GeneratorFunction",n(f,o,"GeneratorFunction"),n(y),n(y,o,"Generator"),n(y,u,function(){return this}),n(y,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function n(e,t,r,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}n=function(e,t,r,a){function o(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?u?u(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},n(e,t,r,a)}function a(e,t,r,n,a,u,o){try{var i=e[u](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,u){var o=e.apply(t,r);function i(e){a(o,n,u,i,l,"next",e)}function l(e){a(o,n,u,i,l,"throw",e)}i(void 0)})}}System.register(["./087AC4D233B64EB0authority-legacy.CVly_Rlm.js","./087AC4D233B64EB0menus-legacy.BMCbaID3.js","./087AC4D233B64EB0apis-legacy.D6ozaKDQ.js","./087AC4D233B64EB0datas-legacy.BLzP5Rsz.js","./087AC4D233B64EB0warningBar-legacy.HqzFbQCV.js","./087AC4D233B64EB0index-legacy.BoF2kFSF.js","./087AC4D233B64EB0authorityBtn-legacy.CRE2HgLp.js","./087AC4D233B64EB0_plugin-vue_export-helper-legacy.DCWa1RRI.js","./087AC4D233B64EB0api-legacy.B5VQ7Fbh.js"],function(t,n){"use strict";var a,o,i,l,c,d,f,s,y,v,h,p,m,b,g,I,w,_,C,k,j,A,B,N;return{setters:[function(e){a=e.g,o=e.d,i=e.c,l=e.u,c=e.a},function(e){d=e.default},function(e){f=e.default},function(e){s=e.default},function(e){y=e._},function(e){v=e.a,h=e.N,p=e.g,m=e.c,b=e.o,g=e.f,I=e.b,w=e.i,_=e.d,C=e.w,k=e.h,j=e.t,A=e.q,B=e.k,N=e.E},null,null,null],execute:function(){var n=document.createElement("style");n.textContent=".authority .el-input-number{margin-left:15px}.authority .el-input-number span{display:none}.tree-content{margin-top:10px;height:calc(100vh - 158px);overflow:auto}\n/*$vite$:1*/",document.head.appendChild(n);var x={class:"authority"},E={class:"gva-table-box"},V={class:"gva-btn-list"},S={class:"flex justify-between items-center"},D={class:"text-lg"};t("default",Object.assign({name:"Authority"},{__name:"authority",setup:function(t){var n=v([{authorityId:0,authorityName:"根角色/严格模式下为当前角色"}]),O=v(!1),T=v("add"),P=v({}),z=h(),G=v("新增角色"),U=v(!1),q=v(!1),F=v({}),$=v({authorityId:0,authorityName:"",parentId:0}),R=v({authorityId:[{required:!0,message:"请输入角色ID",trigger:"blur"},{validator:function(e,t,r){return/^[0-9]*[1-9][0-9]*$/.test(t)?r():r(new Error("请输入正整数"))},trigger:"blur",message:"必须为正整数"}],authorityName:[{required:!0,message:"请输入角色名",trigger:"blur"}],parentId:[{required:!0,message:"请选择父角色",trigger:"blur"}]}),H=v([]),M=function(){var e=u(r().m(function e(){var t;return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a();case 1:0===(t=e.v).code&&(H.value=t.data);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();M();var W=function(e,t){P.value[e]=t},X=v(null),Y=v(null),J=v(null),K=function(e,t){var r=[X,Y,J];t&&r[t].value.needConfirm&&(r[t].value.enterAndNext(),r[t].value.needConfirm=!1)},L=v(null),Q=function(){L.value&&L.value.resetFields(),$.value={authorityId:0,authorityName:"",parentId:0}},Z=function(){Q(),U.value=!1,q.value=!1},ee=function(){L.value.validate(function(){var e=u(r().m(function e(t){var n,a;return r().w(function(e){for(;;)switch(e.n){case 0:if(!t){e.n=8;break}$.value.authorityId=Number($.value.authorityId),a=T.value,e.n="add"===a?1:"edit"===a?3:"copy"===a?5:7;break;case 1:return e.n=2,c($.value);case 2:return 0===e.v.code&&(N({type:"success",message:"添加成功!"}),M(),Z()),e.a(3,7);case 3:return e.n=4,l($.value);case 4:return 0===e.v.code&&(N({type:"success",message:"添加成功!"}),M(),Z()),e.a(3,7);case 5:return(n={authority:{authorityId:0,authorityName:"",datauthorityId:[],parentId:0},oldAuthorityId:0}).authority.authorityId=$.value.authorityId,n.authority.authorityName=$.value.authorityName,n.authority.parentId=$.value.parentId,n.authority.dataAuthorityId=F.value.dataAuthorityId,n.oldAuthorityId=F.value.authorityId,e.n=6,i(n);case 6:0===e.v.code&&(N({type:"success",message:"复制成功！"}),M());case 7:Q(),U.value=!1;case 8:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())},te=function(){n.value=[{authorityId:0,authorityName:"根角色(严格模式下为当前用户角色)"}],re(H.value,n.value,!1)},re=function(e,t,r){e&&e.forEach(function(e){if(e.children&&e.children.length){var n={authorityId:e.authorityId,authorityName:e.authorityName,disabled:r||e.authorityId===$.value.authorityId,children:[]};re(e.children,n.children,r||e.authorityId===$.value.authorityId),t.push(n)}else{var a={authorityId:e.authorityId,authorityName:e.authorityName,disabled:r||e.authorityId===$.value.authorityId};t.push(a)}})},ne=function(e){Q(),G.value="新增角色",T.value="add",$.value.parentId=e,te(),U.value=!0};return function(t,a){var i=p("el-button"),l=p("el-table-column"),c=p("el-table"),v=p("el-cascader"),h=p("el-form-item"),q=p("el-input"),Q=p("el-form"),re=p("el-drawer"),ae=p("el-tab-pane"),ue=p("el-tabs");return b(),m("div",x,[g(y,{title:"注：右上角头像下拉可切换角色"}),I("div",E,[I("div",V,[g(i,{type:"primary",icon:"plus",onClick:a[0]||(a[0]=function(e){return ne(0)})},{default:C(function(){return e(a[6]||(a[6]=[k("新增角色",-1)]))}),_:1})]),g(c,{data:H.value,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"authorityId",style:{width:"100%"}},{default:C(function(){return[g(l,{label:"角色ID","min-width":"180",prop:"authorityId"}),g(l,{align:"left",label:"角色名称","min-width":"180",prop:"authorityName"}),g(l,{align:"left",label:"操作",width:"460"},{default:C(function(t){return[g(i,{icon:"setting",type:"primary",link:"",onClick:function(e){return r=t.row,O.value=!0,void(P.value=r);var r}},{default:C(function(){return e(a[7]||(a[7]=[k("设置权限",-1)]))}),_:1},8,["onClick"]),g(i,{icon:"plus",type:"primary",link:"",onClick:function(e){return ne(t.row.authorityId)}},{default:C(function(){return e(a[8]||(a[8]=[k("新增子角色",-1)]))}),_:1},8,["onClick"]),g(i,{icon:"copy-document",type:"primary",link:"",onClick:function(e){return function(e){for(var t in te(),G.value="拷贝角色",T.value="copy",$.value)$.value[t]=e[t];F.value=e,U.value=!0}(t.row)}},{default:C(function(){return e(a[9]||(a[9]=[k("拷贝",-1)]))}),_:1},8,["onClick"]),g(i,{icon:"edit",type:"primary",link:"",onClick:function(e){return function(e){for(var t in te(),G.value="编辑角色",T.value="edit",$.value)$.value[t]=e[t];te(),L.value&&L.value.clearValidate(),U.value=!0}(t.row)}},{default:C(function(){return e(a[10]||(a[10]=[k("编辑",-1)]))}),_:1},8,["onClick"]),g(i,{icon:"delete",type:"primary",link:"",onClick:function(e){return n=t.row,void B.confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u(r().m(function e(){return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,o({authorityId:n.authorityId});case 1:0===e.v.code&&(N({type:"success",message:"删除成功!"}),M());case 2:return e.a(2)}},e)}))).catch(function(){N({type:"info",message:"已取消删除"})});var n}},{default:C(function(){return e(a[11]||(a[11]=[k("删除",-1)]))}),_:1},8,["onClick"])]}),_:1})]}),_:1},8,["data"])]),g(re,{modelValue:U.value,"onUpdate:modelValue":a[4]||(a[4]=function(e){return U.value=e}),size:A(z).drawerSize,"show-close":!1},{header:C(function(){return[I("div",S,[I("span",D,j(G.value),1),I("div",null,[g(i,{onClick:Z},{default:C(function(){return e(a[12]||(a[12]=[k("取 消",-1)]))}),_:1}),g(i,{type:"primary",onClick:ee},{default:C(function(){return e(a[13]||(a[13]=[k("确 定",-1)]))}),_:1})])])]}),default:C(function(){return[g(Q,{ref_key:"authorityForm",ref:L,model:$.value,rules:R.value,"label-width":"80px"},{default:C(function(){return[g(h,{label:"父级角色",prop:"parentId"},{default:C(function(){return[g(v,{modelValue:$.value.parentId,"onUpdate:modelValue":a[1]||(a[1]=function(e){return $.value.parentId=e}),style:{width:"100%"},disabled:"add"===T.value,options:n.value,props:{checkStrictly:!0,label:"authorityName",value:"authorityId",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])]}),_:1}),g(h,{label:"角色ID",prop:"authorityId"},{default:C(function(){return[g(q,{modelValue:$.value.authorityId,"onUpdate:modelValue":a[2]||(a[2]=function(e){return $.value.authorityId=e}),disabled:"edit"===T.value,autocomplete:"off",maxlength:"15"},null,8,["modelValue","disabled"])]}),_:1}),g(h,{label:"角色姓名",prop:"authorityName"},{default:C(function(){return[g(q,{modelValue:$.value.authorityName,"onUpdate:modelValue":a[3]||(a[3]=function(e){return $.value.authorityName=e}),autocomplete:"off"},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model","rules"])]}),_:1},8,["modelValue","size"]),O.value?(b(),w(re,{key:0,modelValue:O.value,"onUpdate:modelValue":a[5]||(a[5]=function(e){return O.value=e}),size:A(z).drawerSize,title:"角色配置"},{default:C(function(){return[g(ue,{"before-leave":K,type:"border-card"},{default:C(function(){return[g(ae,{label:"角色菜单"},{default:C(function(){return[g(d,{ref_key:"menus",ref:X,row:P.value,onChangeRow:W},null,8,["row"])]}),_:1}),g(ae,{label:"角色api"},{default:C(function(){return[g(f,{ref_key:"apis",ref:Y,row:P.value,onChangeRow:W},null,8,["row"])]}),_:1}),g(ae,{label:"资源权限"},{default:C(function(){return[g(s,{ref_key:"datas",ref:J,authority:H.value,row:P.value,onChangeRow:W},null,8,["authority","row"])]}),_:1})]}),_:1})]}),_:1},8,["modelValue","size"])):_("",!0)])}}}))}}})}();

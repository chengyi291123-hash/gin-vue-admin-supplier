/*! 
 Build based on gin-vue-admin 
 Time : 1763897842000 */
import{P as e,a,g as l,ag as t,c as s,o as u,f as r,w as n,b as o,aa as i,d,i as c,q as p,b8 as v,h as m,z as y,F as f,H as b,n as D,t as x,az as g,b9 as w,k,E as I}from"./087AC4D233B64EB0index.0P5tyZxh.js";import{g as h,f as _,d as V,c as C,u as B}from"./087AC4D233B64EB0sysDictionary.C2dGagcU.js";import{_ as j}from"./087AC4D233B64EB0warningBar.C_-K-Zvy.js";import z from"./087AC4D233B64EB0sysDictionaryDetail.DFNFQ7gn.js";import"./087AC4D233B64EB0sysDictionaryDetail.C_IU_8aR.js";const E={class:"flex-none bg-white text-slate-700 dark:text-slate-400 dark:bg-slate-900 rounded p-4"},U={class:"flex justify-between items-center relative"},q=["onClick"],A={class:"max-w-[160px] truncate"},F={key:0,class:"text-xs text-gray-400 mr-1"},K={class:"mr-auto text-sm"},S={class:"min-w-[40px]"},T={class:"flex-1 bg-white text-slate-700 dark:text-slate-400 dark:bg-slate-900"},H={class:"flex justify-between items-center"},J={class:"text-lg"},O=Object.assign({name:"SysDictionary"},{__name:"sysDictionary",setup(O){const P=e(),G=a(0),L=a({name:null,type:null,status:!0,desc:null,parentID:null}),M=a(""),N=a(!1),Q=a({name:[{required:!0,message:"请输入字典名（中）",trigger:"blur"}],type:[{required:!0,message:"请输入字典名（英）",trigger:"blur"}],desc:[{required:!0,message:"请输入描述",trigger:"blur"}]}),R=a([]),W=a([]),X=async()=>{const e=await h({name:M.value.trim()});0===e.code&&(R.value=e.data,G.value=e.data[0].ID,Y())},Y=()=>{"update"===ee.value&&L.value.ID?W.value=R.value.filter(e=>e.ID!==L.value.ID&&!Z(e.ID,L.value.ID)):W.value=[...R.value]},Z=(e,a)=>{const l=R.value.find(a=>a.ID===e);return!(!l||!l.parentID)&&(l.parentID===a||Z(l.parentID,a))};X();const $=a(!1),ee=a(""),ae=()=>{$.value=!1,L.value={name:null,type:null,status:!0,desc:null,parentID:null}},le=a(null),te=async()=>{le.value.validate(async e=>{if(!e)return;let a;switch(ee.value){case"create":default:a=await C(L.value);break;case"update":a=await B(L.value)}0===a.code&&(I.success("操作成功"),ae(),X())})},se=()=>{ee.value="create",le.value&&le.value.clearValidate(),$.value=!0,Y()},ue=()=>{N.value&&(M.value="",N.value=!1,X())},re=()=>{N.value&&""==M.value.trim()&&(N.value=!1)},ne=()=>{N.value=!0},oe=e=>{"Enter"===e.key&&""!==M.value.trim()&&X()};return(e,a)=>{const h=l("el-button"),C=l("el-input"),B=l("el-icon"),O=l("Delete"),Z=l("el-scrollbar"),ie=l("el-splitter-panel"),de=l("el-splitter"),ce=l("el-option"),pe=l("el-select"),ve=l("el-form-item"),me=l("el-switch"),ye=l("el-form"),fe=l("el-drawer"),be=t("click-outside");return u(),s("div",null,[r(j,{title:"获取字典且缓存方法已在前端utils/dictionary 已经封装完成 不必自己书写 使用方法查看文件内注释"}),r(de,{class:"h-full"},{default:n(()=>[r(ie,{size:"400px",min:"200px",max:"800px",collapsible:""},{default:n(()=>[o("div",E,[o("div",U,[a[8]||(a[8]=o("span",{class:"text font-bold"},"字典列表",-1)),N.value?i((u(),c(C,{key:0,class:"!absolute top-0 left-0 z-2 ease-in-out animate-slide-left",placeholder:"搜索",modelValue:M.value,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),clearable:"",autofocus:N.value,onClear:ue,"prefix-icon":p(v),onKeydown:oe},{append:n(()=>[r(h,{type:M.value?"primary":"info",onClick:X},{default:n(()=>[...a[7]||(a[7]=[m("搜索",-1)])]),_:1},8,["type"])]),_:1},8,["modelValue","autofocus","prefix-icon"])),[[be,re]]):d("",!0),r(h,{class:"ml-auto",icon:p(v),onClick:ne},null,8,["icon"]),r(h,{type:"primary",onClick:se,icon:p(y)},null,8,["icon"])]),r(Z,{class:"mt-4",style:{height:"calc(100vh - 300px)"}},{default:n(()=>[(u(!0),s(f,null,b(R.value,e=>(u(),s("div",{key:e.ID,class:D(["rounded flex justify-between items-center px-2 py-4 cursor-pointer mt-2 hover:bg-blue-50 dark:hover:bg-blue-900 bg-gray-50 dark:bg-gray-800 gap-4",[G.value===e.ID?"text-active":"text-slate-700 dark:text-slate-50",e.parentID?"ml-4 border-l-2 border-blue-200":""]]),onClick:a=>{return l=e,void(G.value=l.ID);var l}},[o("div",A,[e.parentID?(u(),s("span",F,"└─")):d("",!0),m(" "+x(e.name)+" ",1),o("span",K,"（"+x(e.type)+"）",1)]),o("div",S,[r(B,{class:"text-blue-500",onClick:g(a=>(async e=>{const a=await _({ID:e.ID,status:e.status});ee.value="update",0===a.code&&(L.value=a.data.resysDictionary,$.value=!0,Y())})(e),["stop"])},{default:n(()=>[r(p(w))]),_:1},8,["onClick"]),r(B,{class:"ml-2 text-red-500",onClick:a=>(async e=>{k.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{0===(await V({ID:e.ID})).code&&(I({type:"success",message:"删除成功"}),X())})})(e)},{default:n(()=>[r(O)]),_:1},8,["onClick"])])],10,q))),128))]),_:1})])]),_:1}),r(ie,{min:200},{default:n(()=>[o("div",T,[r(z,{"sys-dictionary-i-d":G.value},null,8,["sys-dictionary-i-d"])])]),_:1})]),_:1}),r(fe,{modelValue:$.value,"onUpdate:modelValue":a[6]||(a[6]=e=>$.value=e),size:p(P).drawerSize,"show-close":!1,"before-close":ae},{header:n(()=>[o("div",H,[o("span",J,x("create"===ee.value?"添加字典":"修改字典"),1),o("div",null,[r(h,{onClick:ae},{default:n(()=>[...a[9]||(a[9]=[m(" 取 消 ",-1)])]),_:1}),r(h,{type:"primary",onClick:te},{default:n(()=>[...a[10]||(a[10]=[m(" 确 定 ",-1)])]),_:1})])])]),default:n(()=>[r(ye,{ref_key:"drawerForm",ref:le,model:L.value,rules:Q.value,"label-width":"110px"},{default:n(()=>[r(ve,{label:"父级字典",prop:"parentID"},{default:n(()=>[r(pe,{modelValue:L.value.parentID,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value.parentID=e),placeholder:"请选择父级字典（可选）",clearable:"",filterable:"",style:{width:"100%"}},{default:n(()=>[(u(!0),s(f,null,b(W.value,e=>(u(),c(ce,{key:e.ID,label:"".concat(e.name,"（").concat(e.type,"）"),value:e.ID},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(ve,{label:"字典名（中）",prop:"name"},{default:n(()=>[r(C,{modelValue:L.value.name,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value.name=e),placeholder:"请输入字典名（中）",clearable:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),r(ve,{label:"字典名（英）",prop:"type"},{default:n(()=>[r(C,{modelValue:L.value.type,"onUpdate:modelValue":a[3]||(a[3]=e=>L.value.type=e),placeholder:"请输入字典名（英）",clearable:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),r(ve,{label:"状态",prop:"status",required:""},{default:n(()=>[r(me,{modelValue:L.value.status,"onUpdate:modelValue":a[4]||(a[4]=e=>L.value.status=e),"active-text":"开启","inactive-text":"停用"},null,8,["modelValue"])]),_:1}),r(ve,{label:"描述",prop:"desc"},{default:n(()=>[r(C,{modelValue:L.value.desc,"onUpdate:modelValue":a[5]||(a[5]=e=>L.value.desc=e),placeholder:"请输入描述",clearable:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","size"])])}}});export{O as default};

/*! 
 Build based on gin-vue-admin 
 Time : 1764044126000 */
import{a,r as e,l,c as s,b as t,f as r,t as n,w as o,m as i,g as c,p as d,u,o as p,i as m,d as f,h,q as g,E as w}from"./087AC4D233B64EB0index.CvFrmKQM.js";import{_ as b,c as v}from"./087AC4D233B64EB0initdb.CzXQ0fr6.js";import{_ as y}from"./087AC4D233B64EB0bottomInfo.BuHuzupQ.js";import{_}from"./087AC4D233B64EB0index.NwwQtGXI.js";const x={id:"userLayout",class:"w-full h-full relative"},C={class:"rounded-lg flex items-center justify-evenly w-full h-full md:w-screen md:h-screen md:bg-[#194bfb] bg-white"},B={class:"md:w-3/5 w-10/12 h-full flex items-center justify-evenly"},k={class:"z-[999] pt-12 pb-10 md:w-96 w-full rounded-lg flex flex-col justify-between box-border"},E={class:"flex items-center justify-center"},D={class:"mb-9"},j={class:"text-center text-4xl font-bold"},V={class:"flex w-full justify-between"},A={class:"w-1/3 h-11 bg-[#c3d4f2] rounded"},I=["src"],z=Object.assign({name:"Login"},{__name:"index",setup(z){const q=u(),N=a(6),L=async()=>{var a,e,l,s;const t=await d();N.value=Number(null==(a=t.data)?void 0:a.captchaLength)||0,U.value=null==(e=t.data)?void 0:e.picPath,O.captchaId=null==(l=t.data)?void 0:l.captchaId,O.openCaptcha=null==(s=t.data)?void 0:s.openCaptcha};L();const G=a(null),U=a(""),O=e({username:"admin",password:"",captcha:"",captchaId:"",openCaptcha:!1}),J=e({username:[{validator:(a,e,l)=>{if(e.length<5)return l(new Error("请输入正确的用户名"));l()},trigger:"blur"}],password:[{validator:(a,e,l)=>{if(e.length<6)return l(new Error("请输入正确的密码"));l()},trigger:"blur"}],captcha:[{validator:(a,e,l)=>{if(!O.openCaptcha)return l();const s=(e||"").replace(/\s+/g,"");return s?/^\d+$/.test(s)?s.length<N.value?l(new Error("请输入至少".concat(N.value,"位数字验证码"))):(s!==e&&(O.captcha=s),void l()):l(new Error("验证码须为数字")):l(new Error("请输入验证码"))},trigger:"blur"}]}),M=l(),P=()=>{G.value.validate(async a=>{if(!a)return w({type:"error",message:"请正确填写登录信息",showClose:!0}),!1;return!!(await(async()=>await M.LoginIn(O))())||(await L(),!1)})},$=async()=>{var a;const e=await v();0===e.code&&((null==(a=e.data)?void 0:a.needInit)?(M.NeedInit(),await q.push({name:"Init"})):w({type:"info",message:"已配置数据库信息，无法初始化"}))};return(a,e)=>{const l=c("el-input"),d=c("el-form-item"),u=c("el-button"),w=c("el-form");return p(),s("div",x,[t("div",C,[t("div",B,[e[9]||(e[9]=t("div",{class:"oblique h-[130%] w-3/5 bg-white dark:bg-slate-900 transform -rotate-12 absolute -ml-52"},null,-1)),t("div",k,[t("div",null,[t("div",E,[r(_,{size:6})]),t("div",D,[t("p",j,n(a.$GIN_VUE_ADMIN.appName),1),e[5]||(e[5]=t("p",{class:"text-center text-sm font-normal text-gray-500 mt-2.5"}," A management platform using Golang and Vue ",-1))]),r(w,{ref_key:"loginForm",ref:G,model:O,rules:J,"validate-on-rule-change":!1,onKeyup:i(P,["enter"])},{default:o(()=>[r(d,{prop:"username",class:"mb-6"},{default:o(()=>[r(l,{modelValue:O.username,"onUpdate:modelValue":e[0]||(e[0]=a=>O.username=a),size:"large",placeholder:"请输入用户名","suffix-icon":"user"},null,8,["modelValue"])]),_:1}),r(d,{prop:"password",class:"mb-6"},{default:o(()=>[r(l,{modelValue:O.password,"onUpdate:modelValue":e[1]||(e[1]=a=>O.password=a),"show-password":"",size:"large",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),O.openCaptcha?(p(),m(d,{key:0,prop:"captcha",class:"mb-6"},{default:o(()=>[t("div",V,[r(l,{modelValue:O.captcha,"onUpdate:modelValue":e[2]||(e[2]=a=>O.captcha=a),placeholder:"请输入验证码",size:"large",class:"flex-1 mr-5"},null,8,["modelValue"]),t("div",A,[U.value?(p(),s("img",{key:0,class:"w-full h-full",src:U.value,alt:"请输入验证码",onClick:e[3]||(e[3]=a=>L())},null,8,I)):f("",!0)])])]),_:1})):f("",!0),r(d,{class:"mb-6"},{default:o(()=>[r(u,{class:"shadow shadow-active h-11 w-full",type:"primary",size:"large",onClick:P},{default:o(()=>[...e[6]||(e[6]=[h("登 录",-1)])]),_:1})]),_:1}),r(d,{class:"mb-6"},{default:o(()=>[r(u,{class:"shadow shadow-active h-11 w-full",type:"primary",size:"large",onClick:$},{default:o(()=>[...e[7]||(e[7]=[h("前往初始化",-1)])]),_:1})]),_:1}),r(d,{class:"mb-6"},{default:o(()=>[r(u,{class:"shadow shadow-active h-11 w-full",type:"success",size:"large",onClick:e[4]||(e[4]=a=>g(q).push({name:"SupplierDemo"}))},{default:o(()=>[...e[8]||(e[8]=[h("查看演示 (无需登录)",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])])])]),e[10]||(e[10]=t("div",{class:"hidden md:block w-1/2 h-full float-right bg-[#194bfb]"},[t("img",{class:"h-full",src:b,alt:"banner"})],-1))]),r(y,{class:"left-0 right-0 absolute bottom-3 mx-auto w-full z-20"},{default:o(()=>[...e[11]||(e[11]=[t("div",{class:"links items-center justify-center gap-2 hidden md:flex"},[t("a",{href:"https://www.gin-vue-admin.com/",target:"_blank"},[t("img",{src:"/assets/087AC4D233B64EB0docs.DHdLpnBP.png",class:"w-8 h-8",alt:"文档"})]),t("a",{href:"https://support.qq.com/product/371961",target:"_blank"},[t("img",{src:"/assets/087AC4D233B64EB0kefu.DNqTOiJW.png",class:"w-8 h-8",alt:"客服"})]),t("a",{href:"https://github.com/flipped-aurora/gin-vue-admin",target:"_blank"},[t("img",{src:"/assets/087AC4D233B64EB0github.4gfhYJGc.png",class:"w-8 h-8",alt:"github"})]),t("a",{href:"https://space.bilibili.com/322210472",target:"_blank"},[t("img",{src:"/assets/087AC4D233B64EB0video.CGOnQqiM.png",class:"w-8 h-8",alt:"视频站"})])],-1)])]),_:1})])}}});export{z as default};

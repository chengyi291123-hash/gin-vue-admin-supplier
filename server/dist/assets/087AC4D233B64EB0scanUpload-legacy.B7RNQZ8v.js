/*! 
 Build based on gin-vue-admin 
 Time : 1764044126000 */
System.register(["./087AC4D233B64EB0index-legacy.BoF2kFSF.js","./087AC4D233B64EB0vue-cropper.es-legacy.DwFqzMsD.js","./087AC4D233B64EB0_plugin-vue_export-helper-legacy.DCWa1RRI.js"],function(e,t){"use strict";var a,n,o,r,l,u,i,c,d,s,f,p,v,g,h,m,x,b,w,y,k,C,_,B,j;return{setters:[function(e){a=e.a,n=e.v,o=e.u,r=e.x,l=e.c,u=e.b,i=e.f,c=e.w,d=e.q,s=e.y,f=e.g,p=e.i,v=e.d,g=e.F,h=e.o,m=e.z,x=e.A,b=e.B,w=e.C,y=e.h,k=e.t,C=e.E,_=e.j},function(e){B=e.M},function(e){j=e._}],execute:function(){var t=document.createElement("style");t.textContent=".toolbar{position:fixed;bottom:0;z-index:1000;margin:0;width:100vw;display:flex;justify-content:space-between;border-radius:0;--un-bg-opacity:1;background-color:rgb(15 23 42 / var(--un-bg-opacity));padding:.625rem;--un-shadow:0 -2px 10px var(--un-shadow-color, rgba(0, 0, 0, .1));box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow)}.toolbar .el-button-group{display:flex;gap:.5rem}.toolbar .el-button-group .el-button[data-v-71b771ce]{width:2.5rem;padding:.5rem}[data-v-71b771ce] .vue-cropper{background-color:transparent}.h5-uploader .el-upload{position:relative;cursor:pointer;overflow:hidden;border-radius:.25rem;border:1px dashed var(--el-border-color);border-radius:6px;transition:var(--el-transition-duration-fast)}.h5-uploader .el-upload:hover{border-color:var(--el-color-primary)}.el-icon.h5-uploader-icon{width:8rem;height:8rem;text-align:center;font-size:1.5rem;line-height:2rem;--un-text-opacity:1;color:rgb(107 114 128 / var(--un-text-opacity))}\n/*$vite$:1*/",document.head.appendChild(t);var R={class:"flex justify-center w-full pt-2"},z={class:"flex flex-col w-full h-auto p-0 pt-4"},A={class:"flex-1 min-h-[60vh]"},D={class:"w-screen h-[calc(100vh-175px)] rounded"},E={key:1,class:"flex justify-center items-center w-full h-[calc(100vh-175px)]"},$={class:"toolbar"};e("default",j(Object.assign({name:"scanUpload"},{__name:"scanUpload",setup:function(e){var t=a(0),j=a(""),S=a(!1),U=a(300),F=function(){U.value=window.innerWidth};n(function(){F(),window.addEventListener("resize",F)});var I=o();I.isReady().then(function(){var e=I.currentRoute.value.query;t.value=e.id,j.value=e.token}).catch(function(e){});var q=a(null),L=a(""),M=a(null),V=r().proxy,W=a({}),H=a(!1),N=function(e){V.$refs.cropperRef.changeScale(e)},O=a([1,1]),T=a(300),G=a(300),J=a(!1),K=function(e){if(e.raw.type.includes("image")){if(e.raw.size/1024/1024>8)return C.error("文件大小不能超过8MB!"),!1;var t=_.service({lock:!0,text:"请稍后",background:"rgba(0, 0, 0, 0.7)"}),a=new FileReader;a.onload=function(e){L.value=e.target.result,t.close()},a.readAsDataURL(e.raw)}else C.error("请选择图片文件")},P=function(e){-90===e?V.$refs.cropperRef.rotateLeft():V.$refs.cropperRef.rotateRight()},Q=function(){if(H.value=!0,!1===S.value)return q.value.submit(),!0;V.$refs.cropperRef.getCropBlob(function(e){try{var t=new File([e],"".concat(Date.now(),".jpg"),{type:"image/jpeg"});q.value.clearFiles(),q.value.handleStart(t),q.value.submit()}catch(a){H.value=!1,C.error("上传失败: "+a.message)}})},X=function(e){e.data&&(L.value=null,H.value=!1,W.value={},C.success("上传成功"))};return function(e,a){var n=f("el-icon"),o=f("el-upload"),r=f("el-image"),C=f("el-button"),_=f("el-tooltip"),F=f("el-button-group"),I=f("el-switch");return h(),l(g,null,[u("div",R,[i(o,{ref_key:"uploadRef",ref:q,class:"h5-uploader",action:"".concat(d(s)(),"/fileUploadAndDownload/upload"),accept:"image/*","show-file-list":!1,"auto-upload":!1,headers:{"x-token":j.value},data:{classId:t.value},"on-success":X,"on-change":K},{default:c(function(){return[i(n,{class:"h5-uploader-icon"},{default:c(function(){return[i(d(m))]}),_:1})]}),_:1},8,["action","headers","data"])]),u("div",z,[u("div",A,[u("div",D,[S.value?(h(),p(d(B),{key:0,ref_key:"cropperRef",ref:M,img:L.value,mode:"contain",outputType:"jpeg",autoCrop:!0,autoCropWidth:T.value,autoCropHeight:G.value,fixedBox:!1,fixed:J.value,fixedNumber:O.value,centerBox:!0,canMoveBox:!0,full:!1,maxImgSize:U.value,original:!0},null,8,["img","autoCropWidth","autoCropHeight","fixed","fixedNumber","maxImgSize"])):(h(),l("div",E,[L.value?(h(),p(r,{key:0,src:L.value,class:"max-w-full max-h-full",mode:"cover"},null,8,["src"])):v("",!0)]))])])]),u("div",$,[S.value?(h(),p(F,{key:0},{default:c(function(){return[i(_,{content:"向左旋转"},{default:c(function(){return[i(C,{onClick:a[0]||(a[0]=function(e){return P(-90)}),icon:d(x)},null,8,["icon"])]}),_:1}),i(_,{content:"向右旋转"},{default:c(function(){return[i(C,{onClick:a[1]||(a[1]=function(e){return P(90)}),icon:d(b)},null,8,["icon"])]}),_:1}),i(C,{icon:d(m),onClick:a[2]||(a[2]=function(e){return N(1)})},null,8,["icon"]),i(C,{icon:d(w),onClick:a[3]||(a[3]=function(e){return N(-1)})},null,8,["icon"])]}),_:1})):v("",!0),i(I,{size:"large",modelValue:S.value,"onUpdate:modelValue":a[4]||(a[4]=function(e){return S.value=e}),"inline-prompt":"","active-text":"裁剪","inactive-text":"裁剪"},null,8,["modelValue"]),i(C,{type:"primary",onClick:Q,loading:H.value},{default:c(function(){return[y(k(H.value?"上传中...":"上 传"),1)]}),_:1},8,["loading"])])],64)}}}),[["__scopeId","data-v-71b771ce"]]))}}});
